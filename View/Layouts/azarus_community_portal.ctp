<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- start: Meta -->
        <meta charset="utf-8">
        <title>General</title>
        <!-- end: Meta -->

        <!-- start: Mobile Specific -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

        <!-- end: Mobile Specific -->
        <meta name="csrf-param" content="_csrf">
    <meta name="csrf-token" content="dHdUQ2dJLncDAwRwUiNhQBYgPxQtJnkiHDoRFD4ucTtNRAAyURt.HQ==">


<link href="/css/bootstrap.css?v=1472627931" rel="stylesheet">

<!--
<link href="/css/animate.min.css?v=1.1.0" rel="stylesheet">
<link href="/css/temp.css?v=1.1.0" rel="stylesheet">
<link href="/css/mostactiveusers.css" rel="stylesheet">
<link href="/css/flatelements.css?v=1.1.0" rel="stylesheet">
-->
<link href="/css/theme.css" rel="stylesheet">

<link href="/css/bootstrap-wysihtml5.css?v=1.1.0" rel="stylesheet">


<script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';

var defaultStreamSort = 'c';

var mail_loadMessageUrl = '/mail/mail/show?id=-messageId-';

var mail_viewMessageUrl = '/mail/mail/index?id=-messageId-';

var scSpaceListUrl = '/space/list?ajax=1';

var activityStreamUrl = '/s/general-discussion/space/space/stream?limit=10&from=-from-&mode=activity';

var activityInfoUrl = '/activity/link/info?id=-id-';
</script>
        <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src=" @web/js/html5shiv.js"></script>
        <
        link
        id = "ie-style"
        href = "
        @
        web
        /css/ie.css"
        rel = "stylesheet" >
        <![endif]-->

        <!--[if IE 9]>
        <link id="ie9style" href=" @web/css/ie9.css" rel="stylesheet">
        <![endif]-->


        <!-- start: Favicon and Touch Icons -->
        <link rel="apple-touch-icon" sizes="57x57" href="/ico/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/ico/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72"
              href="/ico/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/ico/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114"
              href="/ico/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120"
              href="/ico/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144"
              href="/ico/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152"
              href="/ico/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180"
              href="/ico/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"
              href="/ico/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32"
              href="/ico/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96"
              href="/ico/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16"
              href="/ico/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <meta charset="UTF-8">
        <!-- end: Favicon and Touch Icons -->

</head>

<body>
	<script src="https://use.fontawesome.com/2d62372de2.js"></script>
<!--
<script src="/assets/b3a45a4f/jquery.timeago.js?v=1472627931"></script>
<script src="/assets/ec998a29/dist/jquery.knob.min.js?v=1472627931"></script>
<script src="/assets/b380c431/ui/minified/widget.min.js?v=1472627931"></script>
<script src="/assets/c0d22c2f/jquery.placeholder.min.js?v=1472627932"></script>
<script src="/assets/f915d136/js/jquery.fileupload.js?v=1472627932"></script>
<script src="/assets/f915d136/js/jquery.iframe-transport.js?v=1472627932"></script>
<script src="/js/ekko-lightbox-modified.js?v=1.1.0"></script>
<script src="/js/modernizr.js?v=1.1.0"></script>
<script src="/js/jquery.cookie.js?v=1.1.0"></script>
<script src="/js/jquery.highlight.min.js?v=1.1.0"></script>
<script src="/js/jquery.autosize.min.js?v=1.1.0"></script>
<script src="/js/wysihtml5-0.3.0.js?v=1.1.0"></script>
<script src="/js/bootstrap3-wysihtml5.js?v=1.1.0"></script>
<script src="/js/jquery.color-2.1.0.min.js?v=1.1.0"></script>
<script src="/js/jquery.flatelements.js?v=1.1.0"></script>
<script src="/js/jquery.loader.js?v=1.1.0"></script>
<script src="/js/desktop-notify-min.js?v=1.1.0"></script>
<script src="/js/desktop-notify-config.js?v=1.1.0"></script>
<script src="/resources/at/jquery.caret.min.js?v=1472628588"></script>
<script src="/resources/at/jquery.atwho.min.js?v=1472628588"></script>
<script src="/resources/file/fileuploader.js?v=1472628588"></script>
<script src="/resources/user/userpicker.js?v=1472628588"></script>
<script src="/js/jquery.nicescroll.min.js?v=1.1.0"></script>
<script src="/js/app.js?v=1.1.0"></script>
<script type="text/javascript">var streamUrl="/s/general-discussion/space/space/stream?limit=-limit-&filters=-filter-&sort=-sort-&from=-from-&mode=normal"</script>
-->



        <!-- start: first top navigation bar -->	
<?php	echo $this->element('topbar-first');	?>
	
	       <!-- start: first top navigation bar -->	
<?php	echo $this->element('topbar-second');	?>
	
	
	


<script type="text/javascript">

    // set niceScroll to SpaceChooser menu
    $("#space-menu-spaces").niceScroll({
        cursorwidth: "7",
        cursorborder: "",
        cursorcolor: "#555",
        cursoropacitymax: "0.2",
        railpadding: {top: 0, right: 3, left: 0, bottom: 0}
    });
    jQuery('.badge-space').fadeIn('slow');
</script>
<script type="text/javascript">
    /**
     * Open search menu
     */
    $('#search-menu-nav').click(function () {

        // use setIntervall to setting the focus
        var searchFocus = setInterval(setFocus, 10);

        function setFocus() {

            // set focus
            $('#search-menu-search').focus();
            // stop interval
            clearInterval(searchFocus);
        }

    });
</script>
<!--
				</ul>
            </div>
        </div>
-->	
	
		
	
	
	
 

    <div class="container">  <!-- THIS IS THE START OF THE CONTAINER WHICH DETERMINES THE WIDTH OF PAGE -->
		<div class="row">
	        <div class="col-md-12">
	            <div class="panel panel-default panel-profile">
				    <div class="panel-profile-header">
				        <div class="image-upload-container" style="width: 100%; height: 100%; overflow:hidden;">
            <!-- profile image output-->
				            <img class="img-profile-header-background" id="user-banner-image" src="/humhub/img/default_banner.jpg" style="width: 100%; max-height: 192px;" width="100%">

            <!-- check if the current user is the profile owner and can change the images -->
            
            <!-- show user name and title -->
				            <div class="img-profile-data">
				                <h1>Manuel  Millan1</h1>
				                <h2>cccc</h2>
				            </div>
           <!-- check if the current user is the profile owner and can change the images -->
	                    </div>
				        <div class="image-upload-container profile-user-photo-container" style="width: 140px; height: 140px;">
							<img class="img-rounded profile-user-photo" id="user-profile-image" src="/humhub/img/default_user.jpg" data-src="holder.js/140x140" alt="140x140" style="width: 140px; height: 140px;">
                 
            <!-- check if the current user is the profile owner and can change the images -->   
						</div>
				    </div>

					<div class="panel-body">
						<div class="panel-profile-controls">
							<!-- start: User statistics -->
							<div class="row">
								<div class="col-md-12">
									<div class="statistics pull-left">
										<a href="/humhub/index.php?r=friendship%2Flist%2Fpopup&amp;userId=7" data-target="#globalModal">
											<div class="pull-left entry">
												<span class="count">1</span>
														<br>
														<span class="title">Friends</span>
											</div>
										</a>
                        
                        <a href="/humhub/index.php?r=user%2Fprofile%2Ffollower-list&amp;uguid=dd5e01e4-0079-4fd2-9787-17397c5d23be" data-target="#globalModal">
                            <div class="pull-left entry">
                                <span class="count">0</span>
                                <br>
                                <span class="title">Followers</span>
                            </div>
                        </a>
                        <a href="/humhub/index.php?r=user%2Fprofile%2Ffollowed-users-list&amp;uguid=dd5e01e4-0079-4fd2-9787-17397c5d23be" data-target="#globalModal">
                            <div class="pull-left entry">
                                <span class="count">1</span>
                                <br>
                                <span class="title">Following</span>
                            </div>
                        </a>
                        <a href="/humhub/index.php?r=user%2Fprofile%2Fspace-membership-list&amp;uguid=dd5e01e4-0079-4fd2-9787-17397c5d23be" data-target="#globalModal">
                            <div class="pull-left entry">
                                <span class="count">1</span><br>
                                <span class="title">Spaces</span>
                            </div>
                        </a>
                    </div>
                    <!-- end: User statistics -->
                    <div class="controls controls-header pull-right">      

						<div class="btn-group">
							<a class="btn btn-success" href="/humhub/index.php?r=friendship%2Frequest%2Fadd&amp;userId=7" data-method="POST">Accept Friend Request</a>        <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<span class="caret"></span>
								<span class="sr-only">Toggle Dropdown</span>
							</button>
							<ul class="dropdown-menu">
								<li>
									<a href="/humhub/index.php?r=friendship%2Frequest%2Fdelete&amp;userId=7" data-method="POST">Deny friend request</a>            </li>
							</ul>
						</div>
					</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- start: Error modal -->
			<div class="modal" id="uploadErrorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-extra-small animated pulse">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
							<h4 class="modal-title" id="myModalLabel"><strong>Something</strong> went wrong</h4>
						</div>
						<div class="modal-body text-center">
			
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
						</div>
					</div>
				</div>
			</div>
			

		</div>
		<div class="row">
        <div class="col-md-8 layout-content-container">
            
            

	<div id="wallStream">

    <!-- DIV for a normal wall stream -->
    <div class="s2_stream" style="">

        <div class="s2_streamContent"><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/humhub/index.php?r=file%2Ffile%2Fdelete';
</script><script src="/humhub/resources/like/like.js?v=1471385648"></script>    

<div class="wall-entry" id="wallEntry_84">



    </div><script src="/humhub/assets/e92efbef/jquery.js?v=1472026192"></script>
<script type="text/javascript">$('#notification_off_90').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_90').hide(); $('#notification_on_90').show(); } },"url":"/humhub/index.php?r=content%2Fcontent%2Fnotification-switch&id=90&switch=0","data":$('#notification_off_90').closest('form').serialize()});
                    return false;
            });
$('#notification_on_90').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_90').hide(); $('#notification_off_90').show(); } },"url":"/humhub/index.php?r=content%2Fcontent%2Fnotification-switch&id=90&switch=1","data":$('#notification_on_90').closest('form').serialize()});
                    return false;
            });
$('#h469225w0').click(function() {
                $.ajax({"type":"POST","success":function(html){ $(".preferences .dropdown").removeClass("open"); $("#wall_content_humhubmodulespostmodelsPost_14").replaceWith(html); },"url":"/humhub/index.php?r=post%2Fpost%2Fedit&id=14&uguid=f33e3f7e-035a-4a9e-b7ec-8a019b220919","data":$('#h469225w0').closest('form').serialize()});
                    return false;
            });
$('#h469225w1').click(function() {
                $.ajax({"type":"POST","success":function(json) { $(".wall_"+json.uniqueId).remove(); },"url":"/humhub/index.php?r=content%2Fcontent%2Fdelete&model=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&id=14","data":$('#h469225w1').closest('form').serialize()});
                    return true;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_14').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_14_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_14'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_14').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_14').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_14_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_14_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_14').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_14_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_14');
            $('#newCommentForm_humhubmodulespostmodelsPost_14_contenteditable').focus();
    },"url":"/humhub/index.php?r=comment%2Fcomment%2Fpost","data":$('#comment_create_post_humhubmodulespostmodelsPost_14').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/humhub/index.php?r=file%2Ffile%2Fdelete';
</script><script src="/humhub/resources/like/like.js?v=1471385648"></script>    


<script type="text/javascript">$('#notification_off_46').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_46').hide(); $('#notification_on_46').show(); } },"url":"/humhub/index.php?r=content%2Fcontent%2Fnotification-switch&id=46&switch=0","data":$('#notification_off_46').closest('form').serialize()});
                    return false;
            });
$('#notification_on_46').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_46').hide(); $('#notification_off_46').show(); } },"url":"/humhub/index.php?r=content%2Fcontent%2Fnotification-switch&id=46&switch=1","data":$('#notification_on_46').closest('form').serialize()});
                    return false;
            });
$('#h469225w2').click(function() {
                $.ajax({"type":"POST","success":function(html){ $(".preferences .dropdown").removeClass("open"); $("#wall_content_humhubmodulespostmodelsPost_7").replaceWith(html); },"url":"/humhub/index.php?r=post%2Fpost%2Fedit&id=7&uguid=fb279f75-966d-4b0d-9c0f-2cee6de4c628","data":$('#h469225w2').closest('form').serialize()});
                    return false;
            });
$('#h469225w3').click(function() {
                $.ajax({"type":"POST","success":function(json) { $(".wall_"+json.uniqueId).remove(); },"url":"/humhub/index.php?r=content%2Fcontent%2Fdelete&model=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&id=7","data":$('#h469225w3').closest('form').serialize()});
                    return true;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_7').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_7_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_7'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_7').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_7').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_7_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_7_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_7').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_7_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_7');
            $('#newCommentForm_humhubmodulespostmodelsPost_7_contenteditable').focus();
    },"url":"/humhub/index.php?r=comment%2Fcomment%2Fpost","data":$('#comment_create_post_humhubmodulespostmodelsPost_7').closest('form').serialize()});
                    return false;
            });</script></div>
        <div id="" class="loader streamLoader" style="display: none;">
    <div class="sk-spinner sk-spinner-three-bounce">
        <div class="sk-bounce1"></div>
        <div class="sk-bounce2"></div>
        <div class="sk-bounce3"></div>
    </div>
</div>
        <div class="emptyStreamMessage" style="display: none;">
            <div class="">
                <div class="panel">
                    <div class="panel-body">
                        <b>Your dashboard is empty!</b><br>Post something on your profile or join some spaces!
					</div>
                </div>
            </div>
        </div>
        <div class="emptyFilterStreamMessage" style="display: none;">
            <div class="placeholder ">
                <div class="panel">
                    <div class="panel-body">
                        No matches with your selected filters!                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DIV for an single wall entry -->
    <div class="s2_single" style="display: none;">
        <div class="back_button_holder">
            <a href="#" class="singleBackLink btn btn-primary">Back to stream</a><br><br>
        </div>
        <div class="p_border"></div>

        <div class="s2_singleContent"></div>
        <div class="loader streamLoaderSingle" style="display: none;"></div>
        <div class="test"></div>
    </div>
</div>

<!-- show "Load More" button on mobile devices -->
<div class="col-md-12 text-center visible-xs visible-sm">
    <button id="btn-load-more" class="btn btn-primary btn-lg ">Load more</button>
    <br><br>
</div>
        </div>
        
    </div>

        <div class="col-md-2 layout-nav-container">
            
<!-- start: list-group navi for large devices -->
<div class="panel panel-default">
    
                
                    <div class="panel-heading"><strong>Space</strong> menu</div>
                <div class="list-group">
                                            <a class=" active list-group-item" href="/s/general-discussion/space/space/home"><i class="fa fa-bars"></i><span>Stream</span></a>                    </div>
    
                
</div>
<!-- end: list-group navi for large devices -->
            <br>
        </div>

                    <div class="col-md-7 layout-content-container">
                
<div class="panel panel-default">
    <div class="panel-body" id="contentFormBody">

        <form action="/s/general-discussion/" method="POST">
<input name="_csrf" value="dmhxcGxTbXQ5AwY4CwYiHxsKFkYAIxs2Thg.KCo3OUdPXzNCJiYLBg==" type="hidden">
        <ul id="contentFormError" style="display: none;">
        </ul>

        
<textarea id="contentForm_message" class="form-control autosize contentForm" name="message" rows="1" placeholder="What's on your mind?" style="display: none; overflow: hidden; overflow-wrap: break-word; resize: none; height: 52px;"></textarea><div id="contentForm_message_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" spellcheck="false" contenteditable="true">What's on your mind?</div>

<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#contentForm_message').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#contentForm_message_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="contentForm_message_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#contentForm_message_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#contentForm_message_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#contentForm_message_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#contentForm_message').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() === "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
        <div id="notifyUserContainer" class="form-group hidden" style="margin-top: 15px;">
            <input value="" id="notifyUserInput" name="notifyUserInput" style="display: none;" type="text"><div class="notifyUserInput_user_picker_container"><ul class="tag_input focus" id="notifyUserInput_invite_tags"><li id="notifyUserInput_tag_input"><input id="notifyUserInput_tag_input_field" class="tag_input_field" value="" autocomplete="off" placeholder="Add a member to notify" type="text"></li></ul><ul class="dropdown-menu" id="notifyUserInput_userpicker" role="menu" aria-labelledby="dropdownMenu"></ul></div>

            

<script type="text/javascript">
    $(document).ready(function () {
        $('#notifyUserInput').userpicker({
            inputId: '#notifyUserInput',
            maxUsers: '10',
            searchUrl: '/s/general-discussion/space/membership/search?keyword=-keywordPlaceholder-',
            currentValue: '',
            focus: '1',
            userGuid: '78f2a5f0-6f9b-4986-9087-4096d451939d',
            data: null,
            placeholderText: 'Add a member to notify'
        });
    });
</script>        </div>

        <input name="containerGuid" value="e0072540-41fd-4e39-b4c7-3b1cda87b3e2" type="hidden"><input name="containerClass" value="humhub\modules\space\models\Space" type="hidden">
        <div class="contentForm_options" style="display: block;">

            <hr>

            <div class="btn_container">

                <div id="postform-loader" class="loader loader-postform hidden">
    <div class="sk-spinner sk-spinner-three-bounce">
        <div class="sk-bounce1"></div>
        <div class="sk-bounce2"></div>
        <div class="sk-bounce3"></div>
    </div>
</div>                
                <button type="submit" id="post_submit_button" class="btn btn-info" data-action="post_create">Submit</button>                
<input id="fileUploaderHiddenField_contentFormFiles" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_contentFormFiles" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("contentFormFiles");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>
                <script>
                    $('#fileUploaderButton_contentFormFiles').bind('fileuploaddone', function (e, data) {
                        $('.btn_container').show();
                    });
                    $('#fileUploaderButton_contentFormFiles').bind('fileuploadprogressall', function (e, data) {
                        var progress = parseInt(data.loaded / data.total * 100, 10);
                        if (progress != 100) {
                            // Fix: remove focus from upload button to hide tooltip
                            $('#post_submit_button').focus();
                            // hide form buttons
                            $('.btn_container').hide();
                        }
                    });</script>


                <!-- public checkbox -->
                <input id="contentForm_visibility" class="contentForm hidden" name="visibility" value="1" type="checkbox">
                <!-- content sharing -->
                <div class="pull-right">

                    <span class="label label-success label-public hidden">Public</span>

                    <ul class="nav nav-pills preferences" style="right: 0; top: 5px;">
                        <li class="dropdown">
                            <a class="dropdown-toggle" style="padding: 5px 10px;" data-toggle="dropdown" href="#"><i class="fa fa-cogs"></i></a>
                            <ul class="dropdown-menu pull-right">
                                <li>
                                    <a href="javascript:notifyUser();"><i class="fa fa-bell"></i> Notify members                                    </a>
                                </li>
                                                                    <li>
                                        <a id="contentForm_visibility_entry" href="javascript:changeVisibility();"><i class="fa fa-unlock"></i> Make public</a>
                                    </li>
                                                            </ul>
                        </li>
                    </ul>


                </div>

            </div>

            <div class="progress" id="fileUploaderProgressbar_contentFormFiles" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_contentFormFiles">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_contentFormFiles"></ul>
</div>


<script>
</script>
        </div>
        <!-- /contentForm_Options -->
        </form>    </div>
    <!-- /panel body -->
</div> <!-- /panel -->

<div class="clearFloats"></div>

<script type="text/javascript">

    // Hide options by default
    jQuery('.contentForm_options').hide();
    $('#contentFormError').hide();
    // Remove info text from the textinput
    jQuery('#contentFormBody').click(function () {

        // Hide options by default
        jQuery('.contentForm_options').fadeIn();
    }); 
    
    setDefaultVisibility();
        
    function setDefaultVisibility() {
                    setPrivateVisibility();
                        
            }
    
    function setPublicVisibility() {
        $('#contentForm_visibility').prop( "checked", true );
        $('#contentForm_visibility_entry').html('<i class="fa fa-lock"></i> Make private');
        $('.label-public').removeClass('hidden');
    }
    
    function setPrivateVisibility() {
        $('#contentForm_visibility').prop( "checked", false );
        $('#contentForm_visibility_entry').html('<i class="fa fa-unlock"></i> Make public');
        $('.label-public').addClass('hidden');
    }

    function changeVisibility() {
        if (!$('#contentForm_visibility').prop('checked')) {
            setPublicVisibility();
        } else {
            setPrivateVisibility();
        }
    }

    function notifyUser() {
        $('#notifyUserContainer').removeClass('hidden');
        $('#notifyUserInput_tag_input_field').focus();
    }

    function handleResponse(response) {
        if (!response.errors) {
            // application.modules_core.wall function
            currentStream.prependEntry(response.wallEntryId);

            // Reset Form (Empty State)
            jQuery('.contentForm_options').hide();
            $('.contentForm').filter(':text').val('');
            $('.contentForm').filter('textarea').val('').trigger('autosize.resize');
            $('.contentForm').attr('checked', false);
            $('.userInput').remove(); // used by UserPickerWidget
            $('#notifyUserContainer').addClass('hidden');
            $('#notifyUserInput').val('');
            
            setDefaultVisibility();
            
            $('#contentFrom_files').val('');
            $('#public').attr('checked', false);
            $('#contentForm_message_contenteditable').html('What&#039;s on your mind?');
            $('#contentForm_message_contenteditable').addClass('atwho-placeholder');
            
            $('#contentFormBody').find('.atwho-input').trigger('clear');
            
            // Notify FileUploadButtonWidget to clear (by providing uploaderId)
            resetUploader('contentFormFiles');
        } else {
            $('#contentFormError').show();
            $.each(response.errors, function (fieldName, errorMessage) {
                // Mark Fields as Error
                fieldId = 'contentForm_' + fieldName;
                $('#' + fieldId).addClass('error');
                $.each(errorMessage, function (key, msg) {
                    $('#contentFormError').append('<li><i class=\"icon-warning-sign\"></i> ' + msg + '</li>');
                });
            });
        }
        $('.contentForm_options .btn').show();
        $('#postform-loader').addClass('hidden');
    }
</script>
    <ul class="nav nav-tabs wallFilterPanel" id="filter" style="">
        <li class=" dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Filter <b class="caret"></b></a>
            <ul class="dropdown-menu">
                                    <li><a href="#" class="wallFilter" id="filter_entry_userinvoled"><i class="fa fa-square-o"></i> Where I´m involved</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_entry_mine"><i class="fa fa-square-o"></i> Created by me</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_entry_files"><i class="fa fa-square-o"></i> Content with attached files</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_posts_links"><i class="fa fa-square-o"></i> Posts with links</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_model_posts"><i class="fa fa-square-o"></i> Posts only</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_entry_archived"><i class="fa fa-square-o"></i> Include archived posts</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_visibility_public"><i class="fa fa-square-o"></i> Only public posts</a>
                    </li>
                                    <li><a href="#" class="wallFilter" id="filter_visibility_private"><i class="fa fa-square-o"></i> Only private posts</a>
                    </li>
                
            </ul>
        </li>
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Sorting                <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="#" class="wallSorting" id="sorting_c"><i class="fa fa-check-square-o"></i> Creation time</a></li>
                <li><a href="#" class="wallSorting" id="sorting_u"><i class="fa fa-square-o"></i> Last update</a></li>
            </ul>
        </li>
    </ul>

<div id="wallStream">

    <!-- DIV for a normal wall stream -->
    <div class="s2_stream" style="">

        <div class="s2_streamContent"><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>
<div class="wall-entry" id="wallEntry_81076">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4839">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_81529" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_81529">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_81529').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_81529').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-81529").focus(); $("#permalink-txt-81529").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_81529 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_81529" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_81529" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/hboy/" class="pull-left">
                <img class="media-object img-rounded user-image user-f2df682a-46a0-4f0c-b93e-2385fa017110" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/img/default_user.jpg" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/hboy/">Hub Boy</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time" title="Oct 23, 2016 - 11:37 AM">a day ago</span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

<?php echo $this->fetch('content');?>   


            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4839">
                                
<span id="post-content-4839" style="overflow: hidden; margin-bottom: 5px;">
    Hi Everyone,<br>
in security section, is it possible to active as "default" List icons <br>
&nbsp;About page <br>
and send mail ?</span>
<a class="more-link-post hidden" id="more-link-post-4839" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4839);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '119';
        var _postHeight = $('#post-content-4839').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4839').removeClass('hidden');
         // set limited height
         $('#post-content- 4839').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4839').removeClass('hidden');
            // set limited height
            $('#post-content-4839').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4839">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4839" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4839">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4839" style="display:none" data-objectid="humhubmodulespostmodelsPost_4839">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4839"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4839').show();$('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4839">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4839">
        
                    


<div class="media" id="comment_12466">
    
    <a href="/u/buddha/" class="pull-left">
        <img class="media-object img-rounded user-image user-ecada327-5e03-410c-8363-85d67ffa0a83" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/buddha/">Julian Harrer</a>
            <small><span class="time" title="Oct 24, 2016 - 2:15 PM">about 3 hours ago</span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12466">
            <span id="comment-message-12466">You mean setting the global default permissions? This will be included in v1.2</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12466">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12466" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12466">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12466" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12466">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12466"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4839" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="TzFEaHNiT3cAWjMgFDcAHCJTI14fEjk1d0ELMDUGG0R2BgZaORcpBQ==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4839" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4839" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="display: none; height: 36px; overflow: hidden; overflow-wrap: break-word; resize: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4839').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4839').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() === "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4839" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4839" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4839");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4839" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4839" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4839">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4839"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4839').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4839').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$(".time").timeago();
$('#notification_off_81529').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_81529').hide(); $('#notification_on_81529').show(); } },"url":"/content/content/notification-switch?id=81529&switch=0","data":$('#notification_off_81529').closest('form').serialize()});
                    return false;
            });
$('#notification_on_81529').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_81529').hide(); $('#notification_off_81529').show(); } },"url":"/content/content/notification-switch?id=81529&switch=1","data":$('#notification_on_81529').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4839').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4839'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4839').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4839').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4839').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4839');
            $('#newCommentForm_humhubmodulespostmodelsPost_4839_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4839').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>    <div class="wall-entry" id="wallEntry_81022">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4836">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_81475" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_81475">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_81475').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_81475').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-81475").focus(); $("#permalink-txt-81475").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_81475 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_81475" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_81475" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/stellaris+agency/" class="pull-left">
                <img class="media-object img-rounded user-image user-2c8267ee-df79-4b13-8b0c-266492b3a8f5" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/uploads/profile_image/2c8267ee-df79-4b13-8b0c-266492b3a8f5.jpg?m=1476785639" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/stellaris+agency/">Loky Stellaris</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time" title="Oct 22, 2016 - 11:13 AM"><span title="Oct 22, 2016 - 11:13 AM">Oct 22, 2016 - 11:13 AM</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4836">
                                
<span id="post-content-4836" style="overflow: hidden; margin-bottom: 5px;">
    Hi...<br>
I see in the directory that there is a "Groups" section.... But doesn't appear in the directory menu and if I go manually to "/directory/groups" it ends on "error page no found" !!<br>
<br>
What's that function?</span>
<a class="more-link-post hidden" id="more-link-post-4836" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4836);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '252';
        var _postHeight = $('#post-content-4836').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4836').removeClass('hidden');
         // set limited height
         $('#post-content- 4836').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4836').removeClass('hidden');
            // set limited height
            $('#post-content-4836').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4836">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4836" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4836">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4836" style="display:none" data-objectid="humhubmodulespostmodelsPost_4836">Unlike</a>    
        <!-- Create link to show all users, who liked this -->
        <a href="/like/like/user-list?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4836" data-target="#globalModal"><span class="likeCount tt" data-placement="top" data-toggle="tooltip" title="" data-original-title="Tom Cal likes this.">(1)</span></a>
    
</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4836"), 1);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4836').show();$('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4836">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4836">
        
                    


<div class="media" id="comment_12457">
    
    <a href="/u/buddha/" class="pull-left">
        <img class="media-object img-rounded user-image user-ecada327-5e03-410c-8363-85d67ffa0a83" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/buddha/">Julian Harrer</a>
            <small><span class="time" title="Oct 22, 2016 - 6:20 PM">2 days ago</span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12457">
            <span id="comment-message-12457">The group section will be visible in the directory, if you have system groups with the setting "Show in directory".</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12457">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12457" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12457">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12457" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12457">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12457"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4836" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="TzFEaHNiT3cAWjMgFDcAHCJTI14fEjk1d0ELMDUGG0R2BgZaORcpBQ==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4836" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4836" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 36px; display: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4836').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4836').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4836" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4836" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4836");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4836" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4836" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4836">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4836"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4836').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4836').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$(".time").timeago();
$('#notification_off_81475').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_81475').hide(); $('#notification_on_81475').show(); } },"url":"/content/content/notification-switch?id=81475&switch=0","data":$('#notification_off_81475').closest('form').serialize()});
                    return false;
            });
$('#notification_on_81475').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_81475').hide(); $('#notification_off_81475').show(); } },"url":"/content/content/notification-switch?id=81475&switch=1","data":$('#notification_on_81475').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4836').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4836'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4836').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4836').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4836').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4836');
            $('#newCommentForm_humhubmodulespostmodelsPost_4836_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4836').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>    <div class="wall-entry" id="wallEntry_80568">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4820">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_81021" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_81021">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_81021').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_81021').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-81021").focus(); $("#permalink-txt-81021").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_81021 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_81021" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_81021" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/brandy/" class="pull-left">
                <img class="media-object img-rounded user-image user-eae739cc-68da-4606-83e5-c8c808d848ec" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/img/default_user.jpg" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/brandy/">David B</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time" title="Oct 18, 2016"><span title="Oct 18, 2016 - 3:46 PM">Oct 18, 2016</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4820">
                                
<span id="post-content-4820" style="overflow: hidden; margin-bottom: 5px;">
    Hi!<br>
<br>
I have an interesting problem - I made some spaces for testing as administrator. Then I logged in as a normal user (I have two accounts for testing).<br>
This normal user doesn´t see the spaces, although they are free for entry. If I invite this user, everything works.<br>
<br>
I attached some images:<br>
In the first image you see just 2 spaces - these two are the two, the normal user sees, just because I invited him.<br>
<br>
In the second you see all spaces, because I´m logged in as administrator. You also see that every space is open for entry...<br>
<br>
How does it work?</span>
<a class="more-link-post hidden" id="more-link-post-4820" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4820);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '568';
        var _postHeight = $('#post-content-4820').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4820').removeClass('hidden');
         // set limited height
         $('#post-content- 4820').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4820').removeClass('hidden');
            // set limited height
            $('#post-content-4820').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

    <!-- Show Images as Thumbnails -->
    <div class="post-files" id="post-files-humhubmodulespostmodelsPost_4820">
                                                    <a data-toggle="lightbox" data-gallery="gallery-humhubmodulespostmodelsPost_4820" href="https://community.humhub.com/file/file/download?guid=0c588d99-b0c0-4912-88e6-39f166545073#.jpeg" data-footer="<button type=&quot;button&quot; class=&quot;btn btn-primary&quot; data-dismiss=&quot;modal&quot;>Close</button>">
                    <img src="https://community.humhub.com/file/file/download?guid=0c588d99-b0c0-4912-88e6-39f166545073&amp;suffix=pi_200x200">
                </a>
            
                                                    <a data-toggle="lightbox" data-gallery="gallery-humhubmodulespostmodelsPost_4820" href="https://community.humhub.com/file/file/download?guid=4e590b29-3b8a-4d2f-b98f-87a2f210eebc#.jpeg" data-footer="<button type=&quot;button&quot; class=&quot;btn btn-primary&quot; data-dismiss=&quot;modal&quot;>Close</button>">
                    <img src="https://community.humhub.com/file/file/download?guid=4e590b29-3b8a-4d2f-b98f-87a2f210eebc&amp;suffix=pi_200x200">
                </a>
            
            </div>

    <!-- Show List of all files -->
    <hr>
    <ul class="files" style="list-style: none; margin: 0;" id="files-4820">
                                <li class="mime mime-image"><a href="https://community.humhub.com/file/file/download?guid=0c588d99-b0c0-4912-88e6-39f166545073" target="_blank"><span class="filename">Bildschirmfoto 2016-10-18 um 15.32.57.pn...</span></a>
                <span class="time" style="padding-right: 20px;" title="- 110.392 kilobytes"> - 110.392 kilobytes</span>

                
            </li>
                                <li class="mime mime-image"><a href="https://community.humhub.com/file/file/download?guid=4e590b29-3b8a-4d2f-b98f-87a2f210eebc" target="_blank"><span class="filename">Bildschirmfoto 2016-10-18 um 15.33.21.pn...</span></a>
                <span class="time" style="padding-right: 20px;" title="- 25.39 kilobytes"> - 25.39 kilobytes</span>

                
            </li>
            </ul>

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4820">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4820" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4820">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4820" style="display:none" data-objectid="humhubmodulespostmodelsPost_4820">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4820"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4820').show();$('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4820">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4820">
        
                    


<div class="media" id="comment_12401">
    
    <a href="/u/lokke/" class="pull-left">
        <img class="media-object img-rounded user-image user-b5756751-305e-4825-ba3a-0db1643979a6" src="/uploads/profile_image/b5756751-305e-4825-ba3a-0db1643979a6.jpg?m=1476785689" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/lokke/">Felix Pielok</a>
            <small><span class="time" title="Oct 19, 2016"><span title="Oct 19, 2016 - 11:42 AM">Oct 19, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12401">
            <span id="comment-message-12401">users, (and admins too) will just see there already joined spaces - you can add a group called "schüler" and add this group "schüler" spaces on registration.</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12401">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12401" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12401">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12401" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12401">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12401"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


                    


<div class="media" id="comment_12448">
    
    <a href="/u/stellaris+agency/" class="pull-left">
        <img class="media-object img-rounded user-image user-2c8267ee-df79-4b13-8b0c-266492b3a8f5" src="/uploads/profile_image/2c8267ee-df79-4b13-8b0c-266492b3a8f5.jpg?m=1476785639" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/stellaris+agency/">Loky Stellaris</a>
            <small><span class="time" title="Oct 22, 2016 - 6:38 AM"><span title="Oct 22, 2016 - 6:38 AM">Oct 22, 2016 - 6:38 AM</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12448">
            <span id="comment-message-12448">The space chooser show only spaces you are in.... To find all spaces there is the directory...</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12448">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12448" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12448">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12448" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12448">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12448"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4820" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="TzFEaHNiT3cAWjMgFDcAHCJTI14fEjk1d0ELMDUGG0R2BgZaORcpBQ==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4820" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4820" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 36px; display: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4820').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4820').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4820" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4820" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4820");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4820" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4820" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4820">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4820"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4820').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4820').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$('#notification_off_81021').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_81021').hide(); $('#notification_on_81021').show(); } },"url":"/content/content/notification-switch?id=81021&switch=0","data":$('#notification_off_81021').closest('form').serialize()});
                    return false;
            });
$('#notification_on_81021').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_81021').hide(); $('#notification_off_81021').show(); } },"url":"/content/content/notification-switch?id=81021&switch=1","data":$('#notification_on_81021').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4820').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4820'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4820').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4820').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4820').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4820');
            $('#newCommentForm_humhubmodulespostmodelsPost_4820_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4820').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>    <div class="wall-entry" id="wallEntry_80338">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4799">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_80787" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_80787">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_80787').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_80787').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-80787").focus(); $("#permalink-txt-80787").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_80787 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_80787" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_80787" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/patrickgriffiths/" class="pull-left">
                <img class="media-object img-rounded user-image user-4fd7dbb9-a050-4759-bd99-b264a07bf139" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/img/default_user.jpg" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/patrickgriffiths/">Patrick Griffiths</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time" title="Oct 14, 2016"><span title="Oct 14, 2016 - 11:21 PM">Oct 14, 2016</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4799">
                                
<span id="post-content-4799" style="overflow: hidden; margin-bottom: 5px;">
    Hello everyone...<br>
<br>
I've just found HumHub and it seems to generally fit what I need, I'm not able to invest the time required to develop from scratch as I would like to but there is one thing about HumHub that I would love to change.<br>
<br>
Is there an easy way to alter the visual title of "Space" I would much rather it appear as "Group" or something to this effect, even "Area" <br>
<br>
I've been looking through the system and the way that it works, so far I quite like what I see and I would love to be able to change much more but I figured it might be a good place to start with asking here for some direction to save some time.<br>
<br>
<br>
Kind Regards,<br>
Patrick.</span>
<a class="more-link-post hidden" id="more-link-post-4799" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4799);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '702';
        var _postHeight = $('#post-content-4799').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4799').removeClass('hidden');
         // set limited height
         $('#post-content- 4799').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4799').removeClass('hidden');
            // set limited height
            $('#post-content-4799').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4799">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4799" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4799">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4799" style="display:none" data-objectid="humhubmodulespostmodelsPost_4799">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4799"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4799').show();$('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4799">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4799">
        
                    


<div class="media" id="comment_12409">
    
    <a href="/u/buddha/" class="pull-left">
        <img class="media-object img-rounded user-image user-ecada327-5e03-410c-8363-85d67ffa0a83" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/buddha/">Julian Harrer</a>
            <small><span class="time" title="Oct 19, 2016"><span title="Oct 19, 2016 - 12:35 PM">Oct 19, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12409">
            <span id="comment-message-12409">Hi, unfortunately there is no easy way of changing this yet, the word space is used throughout the whole application.</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12409">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12409" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12409">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12409" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12409">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12409"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4799" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="TzFEaHNiT3cAWjMgFDcAHCJTI14fEjk1d0ELMDUGG0R2BgZaORcpBQ==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4799" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4799" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 36px; display: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4799').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4799').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4799" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4799" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4799");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4799" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4799" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4799">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4799"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4799').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4799').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$('#notification_off_80787').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_80787').hide(); $('#notification_on_80787').show(); } },"url":"/content/content/notification-switch?id=80787&switch=0","data":$('#notification_off_80787').closest('form').serialize()});
                    return false;
            });
$('#notification_on_80787').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_80787').hide(); $('#notification_off_80787').show(); } },"url":"/content/content/notification-switch?id=80787&switch=1","data":$('#notification_on_80787').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4799').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4799'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4799').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4799').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4799').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4799');
            $('#newCommentForm_humhubmodulespostmodelsPost_4799_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4799').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>    <div class="wall-entry" id="wallEntry_80304">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4797">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_80753" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_80753">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_80753').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_80753').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-80753").focus(); $("#permalink-txt-80753").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_80753 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_80753" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_80753" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/andibandi/" class="pull-left">
                <img class="media-object img-rounded user-image user-e15ec421-ef25-482a-b354-fd66887b953f" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/uploads/profile_image/e15ec421-ef25-482a-b354-fd66887b953f.jpg?m=1476785655" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/andibandi/">Andi Brite</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time"><span title="Oct 14, 2016 - 6:56 PM">Oct 14, 2016</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4797">
                                
<span id="post-content-4797" style="overflow: hidden; margin-bottom: 5px; display: block; max-height: 310px;">
    Hello,<br>
<br>
since my last update (Ubuntu packages atp-get) is a  Syntax Error and a Warning in my log.<br>
<br>
"$_GET = [ 'r' =&gt; 'dashboard/dashboard/stream' 'limit' =&gt; '4' 'filters' =&gt; '' 'sort' =&gt; 'c' 'from' =&gt; '' 'mode' =&gt; 'normal' ]"<br>
<br>
System is Ubuntu Server 16.04.3<br>
- Apache/2.4.18<br>
- PHP 7.0.8<br>
- MySql 5.7.13<br>
- Cache about FILE<br>
- HH requirement all checked<br>
<br>
The error comes as each request in my main/general stream.<br>
<br>
is there anyone who has an idea to fix this?<br>
<br>
Thanks and Kind regards</span>
<a class="more-link-post" id="more-link-post-4797" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4797);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '646';
        var _postHeight = $('#post-content-4797').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4797').removeClass('hidden');
         // set limited height
         $('#post-content- 4797').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4797').removeClass('hidden');
            // set limited height
            $('#post-content-4797').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4797">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4797" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4797">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4797" style="display:none" data-objectid="humhubmodulespostmodelsPost_4797">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4797"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4797').show();$('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4797">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4797">
        
                    


<div class="media" id="comment_12410">
    
    <a href="/u/buddha/" class="pull-left">
        <img class="media-object img-rounded user-image user-ecada327-5e03-410c-8363-85d67ffa0a83" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/buddha/">Julian Harrer</a>
            <small><span class="time"><span title="Oct 19, 2016 - 12:39 PM">Oct 19, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12410">
            <span id="comment-message-12410">Can you post the full error/warning, I think someone had this error before here in the community.</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12410">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12410" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12410">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12410" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12410">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12410"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


                    


<div class="media" id="comment_12414">
    
    <a href="/u/andibandi/" class="pull-left">
        <img class="media-object img-rounded user-image user-e15ec421-ef25-482a-b354-fd66887b953f" src="/uploads/profile_image/e15ec421-ef25-482a-b354-fd66887b953f.jpg?m=1476785655" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/andibandi/">Andi Brite</a>
            <small><span class="time"><span title="Oct 19, 2016 - 1:44 PM">Oct 19, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12414">
            <span id="comment-message-12414">Hi, it has something to do with links in comments to https pages...  at the moment, there're no more errors, only on a page with links in comments...</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12414">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12414" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12414">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12414" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12414">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12414"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4797" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="bGYxZjB1N3kjDUYuVyB4EgEEVlBcBUE7VBZ.PnYRY0pVUXNUegBRCw==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4797" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4797" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="display: none; height: 36px; overflow: hidden; overflow-wrap: break-word; resize: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4797').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4797').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4797" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4797" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4797");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4797" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4797" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4797">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4797"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4797').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4797').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$('#notification_off_80753').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_80753').hide(); $('#notification_on_80753').show(); } },"url":"/content/content/notification-switch?id=80753&switch=0","data":$('#notification_off_80753').closest('form').serialize()});
                    return false;
            });
$('#notification_on_80753').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_80753').hide(); $('#notification_off_80753').show(); } },"url":"/content/content/notification-switch?id=80753&switch=1","data":$('#notification_on_80753').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4797').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4797'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4797').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4797').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4797').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4797');
            $('#newCommentForm_humhubmodulespostmodelsPost_4797_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4797').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>    <div class="wall-entry" id="wallEntry_80197">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4794">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_80646" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_80646">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_80646').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_80646').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-80646").focus(); $("#permalink-txt-80646").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_80646 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_80646" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_80646" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/mintman/" class="pull-left">
                <img class="media-object img-rounded user-image user-c9bfcad4-9549-4cd2-b9d0-0af39eb52a5c" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/img/default_user.jpg" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/mintman/">Mike Richards</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time"><span title="Oct 13, 2016 - 10:24 PM">Oct 13, 2016</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4794">
                                
<span id="post-content-4794" style="overflow: hidden; margin-bottom: 5px;">
    is it possible to use a List View to represent an entire year of events? <br>
<br>
We are using the calendar to keep track of holidays in each of our clients countries. There aren't a lot of these and it would be nice to see at least 2-3 months at a time if possible or a full year in one long list even. I have looked at fullcalendar.io and see there is a yearList view - however when I try this in the js file, the calendar doesn't load. <br>
<br>
Any ideas?</span>
<a class="more-link-post hidden" id="more-link-post-4794" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4794);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '458';
        var _postHeight = $('#post-content-4794').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4794').removeClass('hidden');
         // set limited height
         $('#post-content- 4794').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4794').removeClass('hidden');
            // set limited height
            $('#post-content-4794').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4794">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4794" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4794">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4794" style="display:none" data-objectid="humhubmodulespostmodelsPost_4794">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4794"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4794').show();$('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="display:none;" id="comment_humhubmodulespostmodelsPost_4794">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4794">
        
            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4794" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="bGYxZjB1N3kjDUYuVyB4EgEEVlBcBUE7VBZ.PnYRY0pVUXNUegBRCw==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4794" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4794" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 36px; display: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4794').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4794').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4794" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4794" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4794");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4794" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4794" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4794">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4794"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4794').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">




</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$('#notification_off_80646').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_80646').hide(); $('#notification_on_80646').show(); } },"url":"/content/content/notification-switch?id=80646&switch=0","data":$('#notification_off_80646').closest('form').serialize()});
                    return false;
            });
$('#notification_on_80646').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_80646').hide(); $('#notification_off_80646').show(); } },"url":"/content/content/notification-switch?id=80646&switch=1","data":$('#notification_on_80646').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4794').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4794'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4794').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4794').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4794').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4794');
            $('#newCommentForm_humhubmodulespostmodelsPost_4794_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4794').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>    <div class="wall-entry" id="wallEntry_80054">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4791">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_80503" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_80503">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_80503').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_80503').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-80503").focus(); $("#permalink-txt-80503").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_80503 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_80503" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_80503" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/phenom/" class="pull-left">
                <img class="media-object img-rounded user-image user-ce7b4f26-8b64-418f-bb00-fb59a3d28943" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/img/default_user.jpg" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/phenom/">J.B. Phenom</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time"><span title="Oct 12, 2016 - 4:33 PM">Oct 12, 2016</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4791">
                                
<span id="post-content-4791" style="overflow: hidden; margin-bottom: 5px;">
    Is there a way to do simple formatting (bold, italic,...) in "What's on your mind?"</span>
<a class="more-link-post hidden" id="more-link-post-4791" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4791);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '98';
        var _postHeight = $('#post-content-4791').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4791').removeClass('hidden');
         // set limited height
         $('#post-content- 4791').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4791').removeClass('hidden');
            // set limited height
            $('#post-content-4791').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4791">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4791" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4791">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4791" style="display:none" data-objectid="humhubmodulespostmodelsPost_4791">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4791"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4791').show();$('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4791">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4791">
        
                    


<div class="media" id="comment_12411">
    
    <a href="/u/buddha/" class="pull-left">
        <img class="media-object img-rounded user-image user-ecada327-5e03-410c-8363-85d67ffa0a83" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/buddha/">Julian Harrer</a>
            <small><span class="time"><span title="Oct 19, 2016 - 12:42 PM">Oct 19, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12411">
            <span id="comment-message-12411">Currently not.</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12411">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12411" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12411">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12411" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12411">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12411"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4791" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="bGYxZjB1N3kjDUYuVyB4EgEEVlBcBUE7VBZ.PnYRY0pVUXNUegBRCw==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4791" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4791" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 36px; display: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4791').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4791').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4791" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4791" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4791");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4791" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4791" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4791">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4791"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4791').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4791').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$('#notification_off_80503').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_80503').hide(); $('#notification_on_80503').show(); } },"url":"/content/content/notification-switch?id=80503&switch=0","data":$('#notification_off_80503').closest('form').serialize()});
                    return false;
            });
$('#notification_on_80503').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_80503').hide(); $('#notification_off_80503').show(); } },"url":"/content/content/notification-switch?id=80503&switch=1","data":$('#notification_on_80503').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4791').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4791'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4791').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4791').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4791').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4791');
            $('#newCommentForm_humhubmodulespostmodelsPost_4791_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4791').closest('form').serialize()});
                    return false;
            });</script><script type="text/javascript">var fileuploader_error_modal_title = '<strong>Upload</strong> error';

var fileuploader_error_modal_btn_close = 'Close';

var fileuploader_error_modal_errormsg = 'Could not upload File:';

var file_delete_url = '/file/file/delete';
</script><script src="/resources/like/like.js?v=1476961514"></script>
<div class="wall-entry" id="wallEntry_79832">


<div class="panel panel-default wall_humhubmodulespostmodelsPost_4785">
    <div class="panel-body">

        <div class="media">

            <!-- start: show wall entry options -->
            <ul class="nav nav-pills preferences">
                <li class="dropdown ">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu pull-right">
                        <li>

    
<!-- add Tooltip to link -->


<!-- Link to call the confirm modal -->

    <!-- create normal link element -->
    <a id="deleteLinkPost_modal_permalink_80281" class=" " style="" href="#" data-toggle="modal" data-target="#confirmModal_modal_permalink_80281">
           <i class="fa fa-link"></i> Permalink    </a>


<!-- start: Confirm modal -->


<script type="text/javascript">

    $(document).ready(function () {
        // move modal to body
        $('#confirmModal_modal_permalink_80281').appendTo(document.body);



    });


    $('#confirmModal_modal_permalink_80281').on('shown.bs.modal', function (e) {

        // execute optional JavaScript code, when modal is showing
setTimeout(function(){$("#permalink-txt-80281").focus(); $("#permalink-txt-80281").select();}, 1);
        // remove standard modal with
        $('#confirmModal_modal_permalink_80281 .modal-dialog').attr('style', '');
    })


</script>
<!-- end: Confirm modal --></li>
<li>
    <a id="notification_off_80281" href="#" style="display: none"><i class="fa fa-bell-slash-o"></i> Turn off notifications</a><a id="notification_on_80281" href="#" style="display: block"><i class="fa fa-bell-o"></i> Turn on notifications</a></li>
                    </ul>
                </li>
            </ul>
            <!-- end: show wall entry options -->

            <a href="/u/hfortune/" class="pull-left">
                <img class="media-object img-rounded user-image user-96a0114a-d4e1-4df4-82ac-572d826a02ad" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" src="/img/default_user.jpg" width="40" height="40">
            </a>

            <!-- Show space image, if you are outside from a space -->
            

            <div class="media-body">

                <!-- show username with link and creation time-->
                <h4 class="media-heading"><a href="/u/hfortune/">Heather Fortune</a>
                    <small>

                        <!-- show profile name -->
                        
                        <span class="time"><span title="Oct 11, 2016 - 1:11 AM">Oct 11, 2016</span></span>
                        
                        <!-- show space name -->
                        
                        



                    </small>
                </h4>
                <h5></h5>

            </div>
            <hr>

            <div class="content" id="wall_content_humhubmodulespostmodelsPost_4785">
                                
<span id="post-content-4785" style="overflow: hidden; margin-bottom: 5px; display: block; max-height: 310px;">
    Hi HumHubbers!<br>
I have a question regarding notifications about following spaces vs. membership in a space.<br>
<br>
<br>
I would like for members of my spaces to get an email notification each time a new post is made in their space (well, according to their notification preferences of course -- but we default them with getting these notifications).<br>
<br>
<br>
I remember seeing a space "follow" button and I don't have any followers to my spaces currently (it says 0 for most of them) but I do not see the follow button anymore. Is this because follow is to get notifications of public content of a space you are not a member in? Vs. being a member and getting notifications because you are a member?<br>
<br>
<br>
If so, then I am good, right? My members should be getting notified when new stuff is posted in their spaces (unless they changed their settings)<br>
<br>
<br>
Any help clarifying is most appreciated!</span>
<a class="more-link-post" id="more-link-post-4785" data-state="down" style="margin: 20px 0 20px 0;" href="javascript:showMore(4785);"><i class="fa fa-arrow-down"></i> Read full post...</a>
<script type="text/javascript">

    $(document).ready(function () {

        // save the count of characters
        var _words = '900';
        var _postHeight = $('#post-content-4785').outerHeight();


        /*        if (_words > 1100) {
         // show more-button
         $('#more-link-post-4785').removeClass('hidden');
         // set limited height
         $('#post-content- 4785').css({'display': 'block', 'max-height': '310px'});
         }*/

        if (_postHeight > 310) {
            // show more-button
            $('#more-link-post-4785').removeClass('hidden');
            // set limited height
            $('#post-content-4785').css({'display': 'block', 'max-height': '310px'});
        }
    });

    function showMore(post_id) {

        // set current state
        var _state = $('#more-link-post-' + post_id).attr('data-state');

        if (_state == "down") {

            $('#post-content-' + post_id).css('max-height', '2000px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-up"></i> Collapse');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'up');

        } else {
            // set back to limited length
            $('#post-content-' + post_id).css('max-height', '310px');

            // set new link content
            $('#more-link-post-' + post_id).html('<i class="fa fa-arrow-down"></i> Read full post...');

            // update link state
            $('#more-link-post-' + post_id).attr('data-state', 'down');

        }

    }

</script>
            </div>

            

<div class="wall-entry-controls">
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulespostmodelsPost_4785">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4785" style="display:inline" data-objectid="humhubmodulespostmodelsPost_4785">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4785" style="display:none" data-objectid="humhubmodulespostmodelsPost_4785">Unlike</a>    
        <!-- Create link to show all users, who liked this -->
        <a href="/like/like/user-list?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&amp;contentId=4785" data-target="#globalModal"><span class="likeCount tt" data-placement="top" data-toggle="tooltip" title="" data-original-title="Loky Stellaris
Stevan K
">(2)</span></a>
    
</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulespostmodelsPost_4785"), 2);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>&nbsp;·&nbsp;

    <a href="#" onclick="$('#comment_humhubmodulespostmodelsPost_4785').show();$('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').focus();return false;">Comment</a></div><div class="well well-small comment-container" style="" id="comment_humhubmodulespostmodelsPost_4785">
    <div class="comment " id="comments_area_humhubmodulespostmodelsPost_4785">
                    <a id="humhubmodulespostmodelsPost_4785_showAllLink" class="show show-all-link">Show all 4 comments.</a>            <hr>
        
                    


<div class="media" id="comment_12393">
    
    <a href="/u/patrickgriffiths/" class="pull-left">
        <img class="media-object img-rounded user-image user-4fd7dbb9-a050-4759-bd99-b264a07bf139" src="/img/default_user.jpg" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/patrickgriffiths/">Patrick Griffiths</a>
            <small><span class="time"><span title="Oct 16, 2016 - 10:12 PM">Oct 16, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12393">
            <span id="comment-message-12393">Heather Fortune, I feel the same honestly. This system is pretty nice but the lack of documentation is really painful. I was going to use this system with intent on building on it to save some time with a community project that I'm working on (small scale community project) but after I've given it more thought, it will probably take more time to sift through things and trial and error my way through than to make something myself or use something that has better docs but is a little more bloated... <br>
<br>
It's a sad thing, I've seen a lot of great questions asked on here and not very many responses from people who actually know the answers, or may know.<br>
<br>
This was definitely one of the better (free) community systems I could find to use on short notice but the docs need some serious attention.</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12393">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12393" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12393">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12393" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12393">Unlike</a>    
        <span class="likeCount" style="display: none;"></span>

</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12393"), 0);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


                    


<div class="media" id="comment_12394">
    
    <a href="/u/hfortune/" class="pull-left">
        <img class="media-object img-rounded user-image user-96a0114a-d4e1-4df4-82ac-572d826a02ad" src="/img/default_user.jpg" alt="40x40" data-src="holder.js/40x40" style="width: 40px; height: 40px;" width="40" height="40">
    </a>

    <div class="media-body">
        <h4 class="media-heading"><a href="/u/hfortune/">Heather Fortune</a>
            <small><span class="time"><span title="Oct 16, 2016 - 10:27 PM">Oct 16, 2016</span></span>                            </small>
        </h4>


        <div class="content" id="comment_editarea_12394">
            <span id="comment-message-12394">I've been fortunate in that the platform does pretty much exactly what I need it to do. The few things that we'd like to see are already listed as enhancements. And honestly, my goal with this project has always been to set up something that doesn't need a lot of tech support and can be operated and updated by volunteers... so there's that going for me too! I've managed to do a few little tweaks, but really do think if I had just a couple hours with someone who knew the system and could literally give me a tour, I could really help a lot with making this something non-tech people can do.</span>
            

        </div>

        <div class="wall-entry-controls">
            
<span class="likeLinkContainer" id="likeLinkContainer_humhubmodulescommentmodelsComment_12394">

            <a class="like likeAnchor" href="/like/like/like?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12394" style="display:inline" data-objectid="humhubmodulescommentmodelsComment_12394">Like</a>        <a class="unlike likeAnchor" href="/like/like/unlike?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12394" style="display:none" data-objectid="humhubmodulescommentmodelsComment_12394">Unlike</a>    
        <!-- Create link to show all users, who liked this -->
        <a href="/like/like/user-list?contentModel=humhub%5Cmodules%5Ccomment%5Cmodels%5CComment&amp;contentId=12394" data-target="#globalModal"><span class="likeCount tt" data-placement="top" data-toggle="tooltip" title="" data-original-title="Patrick Griffiths likes this.">(1)</span></a>
    
</span>

<script>
    $(function () {
        updateLikeCounters($("#likeLinkContainer_humhubmodulescommentmodelsComment_12394"), 1);
        initLikeModule();

        // show Tooltips on elements inside the views, which have the class 'tt'
        $('.tt').tooltip({
            html: false,
            container: 'body'
        });

    });
</script>        </div>
    </div>
    <hr>
</div>


            </div>

    
<div id="comment_create_form_humhubmodulespostmodelsPost_4785" class="comment_create">

    <form action="#" method="post">
<input name="_csrf" value="bGYxZjB1N3kjDUYuVyB4EgEEVlBcBUE7VBZ.PnYRY0pVUXNUegBRCw==" type="hidden">    <input name="contentModel" value="humhub\modules\post\models\Post" type="hidden">    <input name="contentId" value="4785" type="hidden">
    <textarea id="newCommentForm_humhubmodulespostmodelsPost_4785" class="form-control autosize commentForm" name="message" rows="1" placeholder="Write a new comment..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 36px; display: none;"></textarea><div id="newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">Write a new comment...</div>
    
<script type="text/javascript">

    $(document).ready(function () {
        //The original form input element will be hidden
        var $formInput = $('#newCommentForm_humhubmodulespostmodelsPost_4785').hide();
        var placeholder = $formInput.attr('placeholder');

        var $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable');

        if (!$editableContent.length) {
            $formInput.after('<div id="newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable" class="atwho-input form-control atwho-placeholder" data-query="0" contenteditable="true">' + placeholder + '</div>');
            $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable');
        }

        var emojis = [
            "Relaxed", "Yum", "Relieved", "Hearteyes", "Cool", "Smirk",
            "KissingClosedEyes", "StuckOutTongue", "StuckOutTongueWinkingEye", "StuckOutTongueClosedEyes", "Disappointed", "Frown",
            "ColdSweat", "TiredFace", "Grin", "Sob", "Gasp", "Gasp2",
            "Laughing", "Joy", "Sweet", "Satisfied", "Innocent", "Wink",
            "Ambivalent", "Expressionless", "Sad", "Slant", "Worried", "Kissing",
            "KissingHeart", "Angry", "Naughty", "Furious", "Cry", "OpenMouth",
            "Fearful", "Confused", "Weary", "Scream", "Astonished", "Flushed",
            "Sleeping", "NoMouth", "Mask", "Worried", "Smile", "Muscle",
            "Facepunch", "ThumbsUp", "ThumbsDown", "Beers", "Cocktail", "Burger",
            "PoultryLeg", "Party", "Cake", "Sun", "Fire", "Heart"
        ];

        var emojis_list = $.map(emojis, function (value, i) {
            return {'id': i, 'name': value};
        });

        // init at plugin
        $editableContent.atwho({
            at: "@",
            data: ["Please type at least 3 characters"],
            insert_tpl: "<a href='/user/profile/&uguid=${guid}' target='_blank' class='atwho-user' data-user-guid='@-${type}${guid}'>${atwho-data-value}</a>",
            tpl: "<li class='hint' data-value=''>${name}</li>",
            search_key: "name",
            limit: 10,
            highlight_first: false,
            callbacks: {
                matcher: function (flag, subtext, should_start_with_space) {
                    var match, regexp;
                    regexp = new RegExp(/(\s+|^)@([\u00C0-\u1FFF\u2C00-\uD7FF\w\s\-\']*$)/);
                    match = regexp.exec(subtext);

                    if (match && typeof match[2] !== 'undefined') {
                        return match[2];
                    }

                    return null;
                },
                remote_filter: function (query, callback) {

                    // set plugin settings for showing hint
                    this.setting.highlight_first = false;
                    this.setting.tpl = "<li data-value=''>Please type at least 3 characters</li>";
                    //this.setting.tpl = "<li class='hint' data-value=''>${name}</li>";

                    // check the char length and data-query attribute for changing plugin settings for showing results
                    if (query.length >= 3 && $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').attr('data-query') == '1') {

                        // set plugin settings for showing results
                        this.setting.highlight_first = true;
                        this.setting.tpl = "<li data-value='@${name}'>${image} ${name}</li>",
                                // load data
                                $.getJSON("/search/search/mentioning", {keyword: query}, function (data) {
                                    callback(data);
                                });

                        // reset query count
                        query.length = 0;

                    }
                }
            }
        }).atwho({
            at: ":",
            insert_tpl: "<img data-emoji-name=';${name};' class='atwho-emoji' with='18' height='18' src='/img/emoji/${name}.svg' />",
            tpl: "<li class='atwho-emoji-entry' data-value=';${name};'><img with='18' height='18' src='/img/emoji/${name}.svg'/></li>",
            data: emojis_list,
            highlight_first: true,
            limit: 100
        });

        //it seems atwho detatches the original element so we have to do a requery
        $editableContent = $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable');

        // remove placeholder text
        $editableContent.on('focus', function () {
            if ($(this).hasClass('atwho-placeholder')) {
                $(this).removeClass('atwho-placeholder');
                $(this).html('');
                $(this).focus();
            }
        }).on('focusout', function () {
            $('#newCommentForm_humhubmodulespostmodelsPost_4785').val(getPlainInput($(this).clone()));
            // add placeholder text, if input is empty
            if ($(this).html() == "" || $(this).html() == " " || $(this).html() == " <br>") {
                $(this).attr('spellcheck', false);
                $(this).html(placeholder);
                $(this).addClass('atwho-placeholder');
            }
        }).on('paste', function (event) {

            // disable standard behavior
            event.preventDefault();
            event.stopImmediatePropagation();

            // create variable for clipboard content
            var text = "";

            if (event.originalEvent.clipboardData) {
                // get clipboard data (Firefox, Webkit)
                text = event.originalEvent.clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
                // get clipboard data (IE)
                text = window.clipboardData.getData("Text");
            }

            // create jQuery object and paste content
            var $result = $('<div></div>').append(escapeHtml(text));
            // set plain text at current cursor position
            insertTextAtCursor($result.text());

        }).on('keypress', function (e) {
            if (e.which == 13) {
                // insert a space by hitting enter for a clean convert of user guids
                insertTextAtCursor(' ');
            }
            $(this).attr('spellcheck', true);
        }).on("shown.atwho", function (event) {
            // set attribute for showing search results
            $(this).attr('data-query', '1');
        }).on("inserted.atwho", function (event, $li) {
            // set attribute for showing search hint
            $(this).attr('data-query', '0');
        }).on('clear', function (evt) {
            $(this).html(placeholder);
            $(this).addClass('atwho-placeholder');
        });
    });

    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    /**
     * Convert contenteditable div content into plain text
     * @param element jQuery contenteditable div element
     * @returns plain text
     */
    function getPlainInput(element) {

        // GENERATE USER GUIDS
        var userCount = element.find('.atwho-user').length;

        for (var i = 0; i <= userCount; i++) {
            var userGuid = element.find('.atwho-user:first').attr('data-user-guid');
            element.find('.atwho-user:first').text(userGuid);
            element.find('.atwho-user:first').removeClass('atwho-user');
        }


        // GENERATE SPACE GUIDS
        var spaceCount = element.find('.atwho-space').length;

        for (var i = 0; i <= spaceCount; i++) {
            var spaceGuid = element.find('.atwho-space:first').attr('data-space-guid');
            element.find('.atwho-space:first').text(spaceGuid);
            element.find('.atwho-space:first').removeClass('atwho-space');
        }


        // GENERATE SMILEYS
        var emojiCount = element.find('.atwho-emoji').length;

        for (var i = 0; i <= emojiCount; i++) {
            var emojiName = element.find('.atwho-emoji:first').attr('data-emoji-name');
            element.find('.atwho-emoji:first').replaceWith(emojiName);
        }

        // save html from contenteditable div
        var html = element.html();

        // rebuild tag structure for webkit browsers
        html = html.replace('<div> <br></div>', '<div></div>');
        html = html.replace('<div><br></div>', '<div></div>');


        // replace all div tags with br tags (webkit)
        html = html.replace(/\<div>/g, '<br>');

        // replace all p tags with br tags (IE)
        html = html.replace(/\<p>/g, '<br>');

        // replace html space
        html = html.replace(/\&nbsp;/g, ' ');

        // remove all line breaks
        html = html.replace(/(?:\r\n|\r|\n)/g, "");

        // replace all <br> with new line break
        element.html(html.replace(/\<br\s*\>/g, '\n'));

        // return plain text without html tags
        return element.text().trim();

    }

    /**
     * Insert a text at the current cursor position
     * @param text insert string
     */
    function insertTextAtCursor(text) {
        var lastNode;
        var sel = window.getSelection();

        var range = sel.getRangeAt(0);
        range.deleteContents();

        //Remove leading line-breaks and spaces
        text = text.replace(/^(?:\r\n|\r|\n)/g, '').trim();

        //We insert the lines reversed since we don't have to align the range
        var lines = text.split(/(?:\r\n|\r|\n)/g).reverse();

        $.each(lines, function (i, line) {
            //Prevent break after last line
            if (i !== 0) {
                var br = document.createElement("br");
                range.insertNode(br);
            }

            //Insert new node
            var newNode = document.createTextNode(line.trim());
            range.insertNode(newNode);

            //Insert leading spaces as textnodes
            var leadingSpaces = line.match(/^\s+/);
            if (leadingSpaces) {
                var spaceCount = leadingSpaces[0].length;
                while (spaceCount > 0) {
                    var spaceNode = document.createTextNode("\u00a0");
                    range.insertNode(spaceNode);
                    spaceCount--;
                }
            }

            //The last node is the first node since we insert reversed
            if (i === 0) {
                lastNode = newNode;
            }
        });

        //Align range
        range.setStartAfter(lastNode);
        range.setEndAfter(lastNode);
        sel.removeAllRanges();
        sel.addRange(range);
    }

</script>
    <div class="comment-buttons">

    
<input id="fileUploaderHiddenField_comment_upload_humhubmodulespostmodelsPost_4785" name="fileList" value="" type="hidden">
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
    }

    .fileinput-button input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        opacity: 0;
        filter: alpha(opacity=0);
        transform: translate(-300px, 0) scale(4);
        font-size: 23px;
        direction: ltr;
        cursor: pointer;
    }
</style>
<span class="btn btn-info fileinput-button tt" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Upload files">
    <i class="fa fa-cloud-upload"></i>

    <input id="fileUploaderButton_comment_upload_humhubmodulespostmodelsPost_4785" name="files[]" data-url="/file/file/upload?objectModel=&amp;objectId=" multiple="" type="file">
</span>

<script>
    $(function () {
        'use strict';
        installUploader("comment_upload_humhubmodulespostmodelsPost_4785");

        // fixing staying tooltip while opening file browser window
        $('.fileinput-button').click(function () {
            $('.tt').tooltip('hide');
        })
    })

</script>

    <button type="submit" id="comment_create_post_humhubmodulespostmodelsPost_4785" class="btn btn-sm btn-default btn-comment-submit pull-left">Send</button>
    </div>

    </form>

    <div class="progress" id="fileUploaderProgressbar_comment_upload_humhubmodulespostmodelsPost_4785" style="display:none">
    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

<div id="fileUploaderList_comment_upload_humhubmodulespostmodelsPost_4785">
    <ul style="list-style: none; margin: 0;" class="contentForm-upload-list" id="fileUploaderListUl_comment_upload_humhubmodulespostmodelsPost_4785"></ul>
</div>


<script>
</script></div>

<script>

    $(document).ready(function () {

        // set the size for one row (Firefox)
        $('#newCommentForm_humhubmodulespostmodelsPost_4785').css({height: '36px'});

        // add autosize function to input
        $('.autosize').autosize();

    });

    // show loader during ajax call
    function showLoader(comment_id) {
        $('#newCommentForm_' + comment_id + '_contenteditable').after('<div class="loader" id="loader-' + comment_id + '" style="padding: 15px 0;"><div class="sk-spinner sk-spinner-three-bounce" style="margin:0;"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div>');
    }

</script>

</div>

<script type="text/javascript">

        // make comments visible at this point to fixing autoresizing issue for textareas in Firefox
        $('#comment_humhubmodulespostmodelsPost_4785').show();



</script>        </div>


    </div>

</div>

    </div>

<script src="/assets/6fdf1674/jquery.js?v=1476787911"></script>
<script type="text/javascript">$('#notification_off_80281').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_off_80281').hide(); $('#notification_on_80281').show(); } },"url":"/content/content/notification-switch?id=80281&switch=0","data":$('#notification_off_80281').closest('form').serialize()});
                    return false;
            });
$('#notification_on_80281').click(function() {
                $.ajax({"type":"POST","success":function(res){ if (res.success) { $('#notification_on_80281').hide(); $('#notification_off_80281').show(); } },"url":"/content/content/notification-switch?id=80281&switch=1","data":$('#notification_on_80281').closest('form').serialize()});
                    return false;
            });
$('#humhubmodulespostmodelsPost_4785_showAllLink').click(function() {
                $.ajax({"type":"POST","success":function(html) { $('#comments_area_humhubmodulespostmodelsPost_4785').html(html); },"url":"/comment/comment/show?contentModel=humhub%5Cmodules%5Cpost%5Cmodels%5CPost&contentId=4785","data":$('#humhubmodulespostmodelsPost_4785_showAllLink').closest('form').serialize()});
                    return false;
            });
$('#comment_create_post_humhubmodulespostmodelsPost_4785').click(function() {
                $.ajax({"type":"POST","beforeSend":function(html){  $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').hide(); $('.comment-buttons').hide(); showLoader('humhubmodulespostmodelsPost_4785'); },"success":function(html) {
            $('#comments_area_humhubmodulespostmodelsPost_4785').append(html);
            $('#newCommentForm_humhubmodulespostmodelsPost_4785').val('').trigger('autosize.resize');
            $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').html('Write a new comment...');
            $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').addClass('atwho-placeholder');
            $('#loader-humhubmodulespostmodelsPost_4785').remove();
            $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').show();
            $('.comment-buttons').show();
            resetUploader('comment_upload_humhubmodulespostmodelsPost_4785');
            $('#newCommentForm_humhubmodulespostmodelsPost_4785_contenteditable').focus();
    },"url":"/comment/comment/post","data":$('#comment_create_post_humhubmodulespostmodelsPost_4785').closest('form').serialize()});
                    return false;
            });</script></div>
        <div id="" class="loader streamLoader" style="display: none;">
    <div class="sk-spinner sk-spinner-three-bounce">
        <div class="sk-bounce1"></div>
        <div class="sk-bounce2"></div>
        <div class="sk-bounce3"></div>
    </div>
</div>
        <div class="emptyStreamMessage" style="display: none;">

            <div class="placeholder-empty-stream">
                <div class="panel">
                    <div class="panel-body">
                        <b>This space is still empty!</b><br>Start by posting something here...                    </div>
                </div>
            </div>

        </div>
        <div class="emptyFilterStreamMessage" style="display: none;">
            <div class="placeholder ">
                <div class="panel">
                    <div class="panel-body">
                        No matches with your selected filters!                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- DIV for an single wall entry -->
    <div class="s2_single" style="display: none;">
        <div class="back_button_holder">
            <a href="#" class="singleBackLink btn btn-primary">Back to stream</a><br><br>
        </div>
        <div class="p_border"></div>

        <div class="s2_singleContent"></div>
        <div class="loader streamLoaderSingle" style="display: none;"></div>
        <div class="test"></div>
    </div>
</div>

<!-- show "Load More" button on mobile devices -->
<div class="col-md-12 text-center visible-xs visible-sm">
    <button id="btn-load-more" class="btn btn-primary btn-lg ">Load more</button>
    <br><br>
</div>
            </div>
            <div class="col-md-3 layout-sidebar-container">
                
<div class="panel panel-default panel-activities">

    <div class="panel-heading"><strong>Latest</strong> activities</div>
    <div id="activityStream">
        <div id="activityEmpty" style="display:none">
            <div class="placeholder">There are no activities yet.</div>
        </div>
        <ul id="activityContents" class="media-list activities" style="overflow: hidden;" tabindex="2">
            
    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
                            <div class="img-space pull-left space-profile-acronym-1 space-acronym hidden" style=" background-color: #d7d7d7; width: 20px; height: 20px; font-size: 8.8px; padding: 3.6px 0; border-radius: 2px;">GD</div><img class="img-space pull-left space-profile-image-1 img-rounded profile-user-photo" src="/uploads/profile_image/e0072540-41fd-4e39-b4c7-3b1cda87b3e2.jpg?m=1476785634" alt="General Discussion" style=" width: 20px; height: 20px">            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>moritz von stietencron</strong> joined the space <strong>General Discussion</strong><br>

                <!-- show time -->
                <span class="time" title="Oct 24, 2016 - 3:21 PM">about 2 hours ago</span>            </div>
        </div>
    </li>



    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Markus Oberhauser</strong> joined this space.<br>

                <!-- show time -->
                <span class="time" title="Oct 24, 2016 - 2:29 PM">about 3 hours ago</span>            </div>
        </div>
    </li>



<a href="#" onclick="activityShowItem(76703); return false;">    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631">
            
            <!-- Show space image, if you are outside from a space -->
                            <div class="img-space pull-left space-profile-acronym-1 space-acronym hidden" style=" background-color: #d7d7d7; width: 20px; height: 20px; font-size: 8.8px; padding: 3.6px 0; border-radius: 2px;">GD</div><img class="img-space pull-left space-profile-image-1 img-rounded profile-user-photo" src="/uploads/profile_image/e0072540-41fd-4e39-b4c7-3b1cda87b3e2.jpg?m=1476785634" alt="General Discussion" style=" width: 20px; height: 20px">            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Julian Harrer</strong> wrote a new comment  "You mean setting the global default permissions? This will be included in v1.2"<br>

                <!-- show time -->
                <span class="time" title="Oct 24, 2016 - 2:15 PM">about 3 hours ago</span>            </div>
        </div>
    </li>
</a>


    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Nikos Lyberakis</strong> joined this space.<br>

                <!-- show time -->
                <span class="time" title="Oct 24, 2016 - 1:17 PM">about 4 hours ago</span>            </div>
        </div>
    </li>



    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
                            <div class="img-space pull-left space-profile-acronym-1 space-acronym hidden" style=" background-color: #d7d7d7; width: 20px; height: 20px; font-size: 8.8px; padding: 3.6px 0; border-radius: 2px;">GD</div><img class="img-space pull-left space-profile-image-1 img-rounded profile-user-photo" src="/uploads/profile_image/e0072540-41fd-4e39-b4c7-3b1cda87b3e2.jpg?m=1476785634" alt="General Discussion" style=" width: 20px; height: 20px">            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>حيدر الميالي</strong> joined the space <strong>General Discussion</strong><br>

                <!-- show time -->
                <span class="time" title="Oct 24, 2016 - 1:01 AM">about 17 hours ago</span>            </div>
        </div>
    </li>



    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Martin Ische</strong> joined this space.<br>

                <!-- show time -->
                <span class="time" title="Oct 23, 2016 - 7:38 PM">about 22 hours ago</span>            </div>
        </div>
    </li>



<a href="#" onclick="activityShowItem(76655); return false;">    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Hub Boy</strong> created a new post "Hi Everyone,
in security section, is it possible to active...".<br>

                <!-- show time -->
                <span class="time" title="Oct 23, 2016 - 11:37 AM">a day ago</span>            </div>
        </div>
    </li>
</a>


    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Hub Boy</strong> joined this space.<br>

                <!-- show time -->
                <span class="time" title="Oct 23, 2016 - 11:34 AM">a day ago</span>            </div>
        </div>
    </li>



    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/img/default_user.jpg">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>James Jone</strong> joined this space.<br>

                <!-- show time -->
                <span class="time" title="Oct 22, 2016 - 7:33 PM">2 days ago</span>            </div>
        </div>
    </li>



<a href="#" onclick="activityShowItem(76622); return false;">    <li class="activity-entry">
        <div class="media">
                            <!-- Show user image -->
                <img class="media-object img-rounded pull-left" data-src="holder.js/32x32" alt="32x32" style="width: 32px; height: 32px;" src="/uploads/profile_image/ecada327-5e03-410c-8363-85d67ffa0a83.jpg?m=1476785631">
            
            <!-- Show space image, if you are outside from a space -->
            
            <div class="media-body text-break">

                <!-- Show content -->
                <strong>Julian Harrer</strong> wrote a new comment  "The group section will be visible in the directory, if you have system groups with the setting..."<br>

                <!-- show time -->
                <span class="time" title="Oct 22, 2016 - 6:20 PM">2 days ago</span>            </div>
        </div>
    </li>
</a>

<li id="activityLoader" style="display: list-item;">
                <div id="" class="loader ">
	    <div class="sk-spinner sk-spinner-three-bounce">
	        <div class="sk-bounce1"></div>
	        <div class="sk-bounce2"></div>
	        <div class="sk-bounce3"></div>
	    </div>
	</div>
	</li>
        </ul>

    </div>
</div>

<script type="text/javascript">

    // set niceScroll to activity list
    $("#activityContents").niceScroll({
        cursorwidth: "7",
        cursorborder: "",
        cursorcolor: "#555",
        cursoropacitymax: "0.2",
        railpadding: {top: 0, right: 3, left: 0, bottom: 0}
    });

    // update nicescroll object with new content height after ajax request
    $(document).ajaxComplete(function (event, xhr, settings) {
        $("#activityContents").getNiceScroll().resize();
    })

</script>



<div class="panel panel-default members" id="space-members-panel">
    <ul class="nav nav-pills preferences">
    <li class="dropdown ">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu pull-right">
            <li><a href="javascript:togglePanelUp('space-members-panel');" class="panel-collapse"><i class="fa fa-minus-square"></i> Collapse</a></li>
            <li><a href="javascript:togglePanelDown('space-members-panel');" class="panel-expand" style="display:none;"><i class="fa fa-plus-square"></i> Expand</a></li>

                    </ul>
    </li>
</ul>

<script type="text/javascript">

    $(document).ready(function () {

        // check and set panel state from cookie
        checkPanelMenuCookie('space-members-panel');
    });


</script>
<div class="panel-heading"><strong>Space</strong> members</div>
    <div class="panel-body">
		<a href="/u/musaa32/">
                <img src="/img/default_user.jpg" class="img-rounded tt img_margin" alt="24x24" data-src="holder.js/24x24" style="width: 24px; height: 24px;" data-toggle="tooltip" data-placement="top" title="" data-original-title="musaa a" width="24" height="24">
            </a>
                            <br>
            <a href="/s/general-discussion/space/membership/members-list" data-target="#globalModal" class="btn btn-default btn-sm">Show all</a>
            </div>
</div>
			</div>
            	
	</div>




<?php  echo $this->Html->script('jquery.js'); ?>
	
    <!-- Bootstrap Core JavaScript -->
<?php  echo $this->Html->script('bootstrap.min.js'); ?>
	
 <?php echo $this->Js->writeBuffer(array('cache'  => TRUE)); 					// Write cached scripts   ?> 
</body>
</html>